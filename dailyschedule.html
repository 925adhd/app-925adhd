<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daily Schedule - 925 ADHD</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#56C3AE">
  <style>
    :root {
      --bg: #0f0f0f;
      --card: #1a1a1a;
      --text: #fff;
      --muted: #999;
      --brand: #56C3AE;
      --brand-dim: rgba(86, 195, 174, 0.15);
      --green: #4ADE80;
      --yellow: #FBBF24;
      --red: #F87171;
      --blue: #818CF8;
      --border: rgba(255, 255, 255, 0.06);
      
      /* Day colors */
      --mon: #F87171;
      --tue: #4ADE80;
      --wed: #60A5FA;
      --thu: #A78BFA;
      --fri: #FBBF24;
      --sat: #F472B6;
      --sun: #22D3EE;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      padding: 20px 16px 100px;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    /* Header */
    .page-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .page-header h1 {
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 4px;
    }

    .page-header p {
      color: var(--muted);
      font-size: 14px;
    }

    .target-badge {
      display: inline-block;
      background: linear-gradient(135deg, var(--brand), var(--green));
      color: #000;
      font-weight: 700;
      font-size: 14px;
      padding: 8px 20px;
      border-radius: 20px;
      margin-top: 12px;
    }

    /* Mode Toggle */
    .mode-toggle {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      background: var(--card);
      padding: 6px;
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    .mode-btn {
      flex: 1;
      background: transparent;
      border: none;
      color: var(--muted);
      padding: 12px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .mode-btn.active {
      background: var(--brand);
      color: #000;
    }

    .mode-btn:hover:not(.active) {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
    }

    /* Rules Card */
    .rules-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
    }

    .rules-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
    }

    .rules-header .arrow {
      transition: transform 0.2s;
    }

    .rules-card.open .rules-header .arrow {
      transform: rotate(180deg);
    }

    .rules-list {
      list-style: none;
      margin-top: 14px;
      display: none;
    }

    .rules-card.open .rules-list {
      display: block;
    }

    .rules-list li {
      font-size: 13px;
      color: var(--muted);
      padding: 8px 0;
      padding-left: 24px;
      position: relative;
      border-bottom: 1px solid var(--border);
    }

    .rules-list li:last-child {
      border-bottom: none;
    }

    .rules-list li::before {
      content: 'âœ¨';
      position: absolute;
      left: 0;
    }

    .rules-list li strong {
      color: var(--text);
    }

    /* Section containers */
    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    /* Day Navigation */
    .day-nav {
      display: flex;
      gap: 4px;
      margin-bottom: 16px;
      overflow-x: auto;
      padding-bottom: 4px;
      -webkit-overflow-scrolling: touch;
    }

    .day-nav::-webkit-scrollbar {
      display: none;
    }

    .day-btn {
      flex: 1;
      min-width: 44px;
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--muted);
      padding: 10px 8px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .day-btn.active {
      background: var(--brand);
      color: #000;
      border-color: var(--brand);
    }

    .day-btn.today {
      border-color: var(--brand);
    }

    /* Day Card */
    .day-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 16px;
      border-left: 4px solid var(--muted);
    }

    .day-card[data-day="monday"] { border-left-color: var(--mon); }
    .day-card[data-day="tuesday"] { border-left-color: var(--tue); }
    .day-card[data-day="wednesday"] { border-left-color: var(--wed); }
    .day-card[data-day="thursday"] { border-left-color: var(--thu); }
    .day-card[data-day="friday"] { border-left-color: var(--fri); }
    .day-card[data-day="saturday"] { border-left-color: var(--sat); }
    .day-card[data-day="sunday"] { border-left-color: var(--sun); }

    .day-header {
      margin-bottom: 16px;
    }

    .day-title {
      font-size: 20px;
      font-weight: 800;
      margin-bottom: 4px;
    }

    .day-subtitle {
      font-size: 13px;
      color: var(--muted);
      font-style: italic;
    }

    .day-target {
      display: inline-block;
      background: rgba(74, 222, 128, 0.15);
      color: var(--green);
      font-size: 13px;
      font-weight: 700;
      padding: 6px 14px;
      border-radius: 16px;
      margin-top: 10px;
    }

    /* Task List */
    .task-list {
      margin-bottom: 16px;
    }

    .task-list h4 {
      font-size: 12px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }

    .task-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid var(--border);
      border-radius: 10px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .task-item:hover {
      background: rgba(255, 255, 255, 0.04);
    }

    .task-item.completed {
      opacity: 0.5;
    }

    .task-item.completed .task-text {
      text-decoration: line-through;
    }

    .task-checkbox {
      width: 22px;
      height: 22px;
      border: 2px solid var(--border);
      border-radius: 6px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      margin-top: 2px;
    }

    .task-item.completed .task-checkbox {
      background: var(--green);
      border-color: var(--green);
      color: #000;
    }

    .task-content {
      flex: 1;
    }

    .task-text {
      font-size: 14px;
      margin-bottom: 4px;
      line-height: 1.4;
    }

    .task-text a {
      color: var(--brand);
      text-decoration: none;
    }

    .task-earnings {
      font-size: 11px;
      color: var(--green);
      font-weight: 600;
    }

    /* Celebration */
    .celebration {
      background: linear-gradient(135deg, var(--brand), var(--green));
      color: #000;
      padding: 14px;
      border-radius: 10px;
      text-align: center;
      font-weight: 700;
      margin-bottom: 16px;
      display: none;
    }

    .celebration.visible {
      display: block;
      animation: pop 0.3s ease;
    }

    @keyframes pop {
      0% { transform: scale(0.9); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Tip */
    .day-tip {
      font-size: 13px;
      color: var(--muted);
      padding: 12px;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 10px;
      border-left: 3px solid var(--yellow);
      margin-bottom: 16px;
    }

    .day-tip strong {
      color: var(--yellow);
    }

    /* Actions */
    .day-actions {
      display: flex;
      gap: 8px;
    }

    .action-btn {
      flex: 1;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border);
      color: var(--muted);
      padding: 10px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .action-btn:hover {
      background: rgba(255, 255, 255, 0.08);
      color: var(--text);
    }

    .action-btn.reset {
      color: var(--red);
      border-color: rgba(248, 113, 113, 0.3);
    }

    /* Free Flow Section */
    .energy-toggle {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }

    .energy-btn {
      flex: 1;
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--muted);
      padding: 14px 12px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .energy-btn:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .energy-btn.active {
      border-color: var(--brand);
      background: var(--brand-dim);
      color: var(--brand);
    }

    .energy-btn .emoji {
      font-size: 20px;
      display: block;
      margin-bottom: 4px;
    }

    /* Progress */
    .progress-bar {
      display: flex;
      align-items: center;
      gap: 12px;
      background: var(--card);
      padding: 12px 16px;
      border-radius: 12px;
      margin-bottom: 20px;
      border: 1px solid var(--border);
    }

    .progress-bar .icon {
      font-size: 20px;
    }

    .progress-info {
      flex: 1;
    }

    .progress-info .label {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .progress-track {
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--brand), var(--green));
      border-radius: 3px;
      transition: width 0.4s ease;
    }

    .progress-count {
      font-size: 13px;
      font-weight: 700;
      color: var(--brand);
    }

    /* Platform reference */
    .platforms-ref {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .platforms-header {
      padding: 14px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
    }

    .platforms-header .arrow {
      transition: transform 0.2s;
    }

    .platforms-ref.open .platforms-header .arrow {
      transform: rotate(180deg);
    }

    .platforms-content {
      display: none;
      padding: 0 16px 16px;
    }

    .platforms-ref.open .platforms-content {
      display: block;
    }

    .platform-category {
      margin-bottom: 16px;
    }

    .platform-category:last-child {
      margin-bottom: 0;
    }

    .platform-category h5 {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .platform-category h5 .tag {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 10px;
    }

    .platform-category h5 .tag.high {
      background: rgba(248, 113, 113, 0.15);
      color: var(--red);
    }

    .platform-category h5 .tag.med {
      background: rgba(251, 191, 36, 0.15);
      color: var(--yellow);
    }

    .platform-category h5 .tag.easy {
      background: rgba(74, 222, 128, 0.15);
      color: var(--green);
    }

    .platform-links {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .platform-link {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 12px;
      text-decoration: none;
      border: 1px solid var(--border);
      transition: all 0.2s;
    }

    .platform-link:hover {
      background: var(--brand-dim);
      border-color: var(--brand);
      color: var(--brand);
    }

    .platform-link .pay {
      color: var(--green);
      font-weight: 600;
      margin-left: 6px;
    }
  </style>
</head>
<body data-page-title="Daily Schedule">
  <div class="container">
    
    <!-- Header -->
    <header class="page-header">
      <h1>ðŸ“… Daily Schedule</h1>
      <p>ADHD-friendly gigwork plan</p>
      <span class="target-badge">ðŸŽ¯ Target: $200-400/week</span>
    </header>

    <!-- Mode Toggle -->
    <div class="mode-toggle">
      <button class="mode-btn active" data-mode="freeflow">ðŸŽ¯ Free Flow</button>
      <button class="mode-btn" data-mode="structured">ðŸ“… Daily Structure</button>
    </div>

    <!-- Rules -->
    <div class="rules-card" id="rulesCard">
      <div class="rules-header" onclick="toggleRules()">
        <span>âœ¨ The Rules</span>
        <span class="arrow">â–¼</span>
      </div>
      <ul class="rules-list">
        <li><strong>No guilt if skipped.</strong> Just keep going.</li>
        <li><strong>High-value first.</strong> Start with $20+/hr tasks when energy is high.</li>
        <li><strong>Stack easy wins.</strong> Build momentum with quick tasks.</li>
        <li><strong>Rotate platforms.</strong> Keep things fresh.</li>
        <li><strong>Celebrate every win.</strong> Even small earnings add up!</li>
      </ul>
    </div>

    <!-- Platform Reference -->
    <div class="platforms-ref" id="platformsRef">
      <div class="platforms-header" onclick="togglePlatforms()">
        <span>ðŸ”— Platform Quick Links</span>
        <span class="arrow">â–¼</span>
      </div>
      <div class="platforms-content">
        <div class="platform-category">
          <h5>Premium Research <span class="tag high">$25-75/hr</span></h5>
          <div class="platform-links">
            <a href="https://respondent.io" target="_blank" class="platform-link">Respondent <span class="pay">$50-200</span></a>
            <a href="https://userinterviews.com" target="_blank" class="platform-link">User Interviews <span class="pay">$40-150</span></a>
            <a href="https://dscout.com" target="_blank" class="platform-link">dscout <span class="pay">$25-100</span></a>
          </div>
        </div>
        <div class="platform-category">
          <h5>Testing & AI <span class="tag med">$15-30/hr</span></h5>
          <div class="platform-links">
            <a href="https://usertesting.com" target="_blank" class="platform-link">UserTesting <span class="pay">$10/test</span></a>
            <a href="https://outlier.ai" target="_blank" class="platform-link">Outlier AI <span class="pay">$15-50/hr</span></a>
            <a href="https://prolific.co" target="_blank" class="platform-link">Prolific <span class="pay">$8-15/hr</span></a>
          </div>
        </div>
        <div class="platform-category">
          <h5>Quick Wins <span class="tag easy">$5-25/task</span></h5>
          <div class="platform-links">
            <a href="https://rev.com" target="_blank" class="platform-link">Rev <span class="pay">$8-15/hr</span></a>
            <a href="https://clickworker.com" target="_blank" class="platform-link">Clickworker <span class="pay">$8-15/hr</span></a>
            <a href="https://fieldagent.net" target="_blank" class="platform-link">Field Agent <span class="pay">$3-15</span></a>
          </div>
        </div>
      </div>
    </div>

    <!-- FREE FLOW SECTION -->
    <div class="section active" id="freeflowSection">
      
      <!-- Energy Toggle -->
      <div class="energy-toggle">
        <button class="energy-btn active" data-energy="all">
          <span class="emoji">ðŸ“‹</span>
          All Tasks
        </button>
        <button class="energy-btn" data-energy="high">
          <span class="emoji">ðŸ”¥</span>
          High Energy
        </button>
        <button class="energy-btn" data-energy="low">
          <span class="emoji">âš¡</span>
          Low Energy
        </button>
      </div>

      <!-- Progress -->
      <div class="progress-bar">
        <span class="icon">ðŸŽ¯</span>
        <div class="progress-info">
          <div class="label">Tasks completed</div>
          <div class="progress-track">
            <div class="progress-fill" id="freeflowProgress" style="width: 0%"></div>
          </div>
        </div>
        <span class="progress-count"><span id="freeflowCount">0</span> / <span id="freeflowTotal">8</span></span>
      </div>

      <!-- Celebration -->
      <div class="celebration" id="freeflowCelebration">ðŸŽ‰ Great progress! Keep it up!</div>

      <!-- Free Flow Tasks -->
      <div class="day-card" style="border-left-color: var(--brand)">
        <div class="day-header">
          <div class="day-title">Free Flow Mode</div>
          <div class="day-subtitle">Work at your own pace, no schedule pressure</div>
        </div>

        <div class="task-list">
          <h4 id="freeflowTasksHeader">High-Value Tasks</h4>
          <div id="freeflowTasks"></div>
        </div>

        <div class="day-tip">
          <strong>Strategy:</strong> Work through these based on energy and time. No pressure - just consistent progress!
        </div>

        <div class="day-actions">
          <button class="action-btn reset" onclick="resetFreeflow()">Reset All</button>
        </div>
      </div>
    </div>

    <!-- STRUCTURED SECTION -->
    <div class="section" id="structuredSection">
      
      <!-- Day Navigation -->
      <div class="day-nav" id="dayNav"></div>

      <!-- Day Cards Container -->
      <div id="dayCards"></div>
    </div>

  </div>

  <script>
    // Data
    const freeflowTasks = [
      { text: 'Apply to 3+ <a href="https://respondent.io" target="_blank">Respondent</a> studies', earnings: '$50-200 each', energy: 'high' },
      { text: 'Complete a <a href="https://dscout.com" target="_blank">dscout</a> mission', earnings: '$25-100', energy: 'high' },
      { text: 'Work on <a href="https://outlier.ai" target="_blank">Outlier AI</a> tasks', earnings: '$15-50/hr', energy: 'high' },
      { text: '1 hour of <a href="https://rev.com" target="_blank">Rev</a> transcription', earnings: '$8-15', energy: 'low' },
      { text: 'Check <a href="https://usertesting.com" target="_blank">UserTesting</a> for tests', earnings: '$10/test', energy: 'low' },
      { text: 'Do <a href="https://prolific.co" target="_blank">Prolific</a> studies', earnings: '$8-15/hr', energy: 'low' },
      { text: 'Set up passive income apps', earnings: '$1-5/day', energy: 'low' },
      { text: 'Do a mystery shopping task', earnings: '$10-50', energy: 'low' }
    ];

    const weeklyPlan = {
      monday: {
        title: 'MONDAY',
        subtitle: 'High-Value Focus Day',
        target: '$80-120',
        tip: 'Start strong with high-paying applications. Monday energy is perfect for concentration-heavy tasks!',
        tasks: [
          { text: 'Apply to 5+ studies on <a href="https://respondent.io" target="_blank">Respondent</a>', earnings: '$50-200 each' },
          { text: 'Complete 1-2 hours of <a href="https://rev.com" target="_blank">Rev rush jobs</a>', earnings: '$25-40' },
          { text: 'Check <a href="https://usertesting.com" target="_blank">UserTesting</a> for premium tests', earnings: '$30-60' },
          { text: 'Apply to <a href="https://userinterviews.com" target="_blank">User Interviews</a> studies', earnings: '$40-150' }
        ]
      },
      tuesday: {
        title: 'TUESDAY',
        subtitle: 'Research & Live Studies',
        target: '$70-100',
        tip: 'Combine screen work with getting out. Perfect for mystery shopping between research studies!',
        tasks: [
          { text: 'Complete a <a href="https://dscout.com" target="_blank">dscout mission</a>', earnings: '$25-100' },
          { text: 'Check <a href="https://prolific.co" target="_blank">Prolific</a> every 2 hours', earnings: '$12-25/hr' },
          { text: 'Do mystery shopping with BestMark', earnings: '$10-50' },
          { text: 'Work on <a href="https://outlier.ai" target="_blank">Outlier AI</a> tasks', earnings: '$15-50/hr' }
        ]
      },
      wednesday: {
        title: 'WEDNESDAY',
        subtitle: 'Transcription & AI Focus',
        target: '$60-90',
        tip: 'Use remaining focus for steady transcription work. These platforms offer consistent income!',
        tasks: [
          { text: '2-3 hours on <a href="https://rev.com" target="_blank">Rev transcription</a>', earnings: '$15-30/hr' },
          { text: 'Complete <a href="https://outlier.ai" target="_blank">Outlier AI</a> tasks', earnings: '$15-50/hr' },
          { text: 'Set up passive income apps', earnings: '$1-5/day' },
          { text: 'Work on <a href="https://clickworker.com" target="_blank">Clickworker</a> HITs', earnings: '$8-15/hr' }
        ]
      },
      thursday: {
        title: 'THURSDAY',
        subtitle: 'Mixed High-Value Day',
        target: '$60-90',
        tip: 'Mix testing with applications for next week. Passive income should be generating $1-5 daily!',
        tasks: [
          { text: 'Priority check on <a href="https://usertesting.com" target="_blank">UserTesting</a>', earnings: '$10-60/test' },
          { text: 'Complete qualification tasks', earnings: '$10-18/hr' },
          { text: 'Apply to weekend research studies', earnings: 'Future $$' },
          { text: 'Check passive income earnings', earnings: '$1-5' }
        ]
      },
      friday: {
        title: 'FRIDAY',
        subtitle: 'Strong Finish Day',
        target: '$70-100',
        tip: 'Use end-of-week motivation for one final push. Review your weekly total and celebrate!',
        tasks: [
          { text: 'Focus session on highest-paying platform', earnings: '$20-50' },
          { text: 'Complete pending high-value applications', earnings: 'Future $$' },
          { text: 'Final transcription push', earnings: '$10-25/hr' },
          { text: 'Plan next week\'s opportunities', earnings: 'Strategy' }
        ]
      },
      saturday: {
        title: 'SATURDAY',
        subtitle: 'Flexible Weekend Day',
        target: '$30-60',
        tip: 'Keep it light but profitable. Combine gigs with regular weekend activities!',
        tasks: [
          { text: 'Weekend mystery shopping while running errands', earnings: '$15-40' },
          { text: 'Check for weekend bonus tasks', earnings: '$3-12 each' },
          { text: 'Quick surveys during downtime', earnings: '$8-15/hr' },
          { text: 'Check passive income apps are running', earnings: '$1-3' }
        ]
      },
      sunday: {
        title: 'SUNDAY',
        subtitle: 'Planning & Light Work',
        target: '$20-40',
        tip: 'The secret to a $200-400+ week is preparation! Sunday applications become Monday opportunities.',
        tasks: [
          { text: 'Apply to 10+ studies for next week', earnings: 'Future $$' },
          { text: 'Update all platform profiles', earnings: 'Better matches' },
          { text: 'Light surveys or quick gigs', earnings: '$5-15' },
          { text: 'Calculate weekly earnings & plan ahead', earnings: 'Strategy' }
        ]
      }
    };

    // State
    let freeflowState = JSON.parse(localStorage.getItem('925_freeflow') || '{}');
    let structuredState = JSON.parse(localStorage.getItem('925_structured') || '{}');
    let currentEnergy = 'all';
    let currentDay = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'][new Date().getDay()];

    // Initialize
    function init() {
      renderFreeflow();
      renderDayNav();
      renderDayCards();
      setupEventListeners();
    }

    // Toggle functions
    function toggleRules() {
      document.getElementById('rulesCard').classList.toggle('open');
    }

    function togglePlatforms() {
      document.getElementById('platformsRef').classList.toggle('open');
    }

    // Mode switching
    function setupEventListeners() {
      // Mode toggle
      document.querySelectorAll('.mode-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
          document.getElementById(btn.dataset.mode + 'Section').classList.add('active');
        });
      });

      // Energy toggle
      document.querySelectorAll('.energy-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.energy-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentEnergy = btn.dataset.energy;
          renderFreeflow();
        });
      });
    }

    // Freeflow rendering
    function renderFreeflow() {
      const container = document.getElementById('freeflowTasks');
      const filtered = currentEnergy === 'all' 
        ? freeflowTasks 
        : freeflowTasks.filter(t => t.energy === currentEnergy);

      // Update header
      const headers = {
        all: 'High-Value Tasks',
        high: 'High Energy Tasks ($25+)',
        low: 'Low Energy Tasks'
      };
      document.getElementById('freeflowTasksHeader').textContent = headers[currentEnergy];

      container.innerHTML = filtered.map((task, i) => {
        const key = `freeflow_${i}`;
        const completed = freeflowState[key] || false;
        return `
          <div class="task-item ${completed ? 'completed' : ''}" onclick="toggleFreeflowTask(${i})">
            <div class="task-checkbox">${completed ? 'âœ“' : ''}</div>
            <div class="task-content">
              <div class="task-text">${task.text}</div>
              <div class="task-earnings">ðŸ’° ${task.earnings}</div>
            </div>
          </div>
        `;
      }).join('');

      updateFreeflowProgress();
    }

    function toggleFreeflowTask(index) {
      const key = `freeflow_${index}`;
      freeflowState[key] = !freeflowState[key];
      localStorage.setItem('925_freeflow', JSON.stringify(freeflowState));
      renderFreeflow();
    }

    function updateFreeflowProgress() {
      const total = freeflowTasks.length;
      const completed = Object.values(freeflowState).filter(Boolean).length;
      const percent = (completed / total) * 100;
      
      document.getElementById('freeflowProgress').style.width = percent + '%';
      document.getElementById('freeflowCount').textContent = completed;
      document.getElementById('freeflowTotal').textContent = total;
      
      const celebration = document.getElementById('freeflowCelebration');
      celebration.classList.toggle('visible', completed >= 3);
    }

    function resetFreeflow() {
      freeflowState = {};
      localStorage.setItem('925_freeflow', '{}');
      renderFreeflow();
    }

    // Structured rendering
    function renderDayNav() {
      const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
      const dayNames = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
      
      document.getElementById('dayNav').innerHTML = days.map((day, i) => `
        <button class="day-btn ${day === currentDay ? 'active today' : ''}" 
                onclick="scrollToDay('${day}')" 
                data-day="${day}">
          ${dayNames[i]}
        </button>
      `).join('');
    }

    function renderDayCards() {
      const container = document.getElementById('dayCards');
      const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
      
      container.innerHTML = days.map(day => {
        const data = weeklyPlan[day];
        const dayState = structuredState[day] || {};
        const allCompleted = data.tasks.every((_, i) => dayState[i]);
        
        return `
          <div class="day-card" data-day="${day}" id="${day}Card">
            <div class="day-header">
              <div class="day-title">${data.title}</div>
              <div class="day-subtitle">${data.subtitle}</div>
              <span class="day-target">ðŸŽ¯ ${data.target}</span>
            </div>

            <div class="celebration ${allCompleted ? 'visible' : ''}" id="${day}Celebration">
              ðŸŽ‰ ${data.title} complete! Great work!
            </div>

            <div class="task-list">
              <h4>Priority Tasks</h4>
              ${data.tasks.map((task, i) => {
                const completed = dayState[i] || false;
                return `
                  <div class="task-item ${completed ? 'completed' : ''}" onclick="toggleStructuredTask('${day}', ${i})">
                    <div class="task-checkbox">${completed ? 'âœ“' : ''}</div>
                    <div class="task-content">
                      <div class="task-text">${task.text}</div>
                      <div class="task-earnings">ðŸ’° ${task.earnings}</div>
                    </div>
                  </div>
                `;
              }).join('')}
            </div>

            <div class="day-tip">
              <strong>Strategy:</strong> ${data.tip}
            </div>

            <div class="day-actions">
              <button class="action-btn reset" onclick="resetDay('${day}')">Reset Day</button>
            </div>
          </div>
        `;
      }).join('');

      // Scroll to today
      setTimeout(() => {
        const todayCard = document.getElementById(currentDay + 'Card');
        if (todayCard) {
          todayCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }, 300);
    }

    function scrollToDay(day) {
      document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
      document.querySelector(`.day-btn[data-day="${day}"]`).classList.add('active');
      
      const card = document.getElementById(day + 'Card');
      if (card) {
        card.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    function toggleStructuredTask(day, index) {
      if (!structuredState[day]) structuredState[day] = {};
      structuredState[day][index] = !structuredState[day][index];
      localStorage.setItem('925_structured', JSON.stringify(structuredState));
      renderDayCards();
    }

    function resetDay(day) {
      structuredState[day] = {};
      localStorage.setItem('925_structured', JSON.stringify(structuredState));
      renderDayCards();
    }

    // Initialize
    init();
  </script>

  <div id="site-nav"></div>
  <script src="assets/layout.js"></script>
</body>
</html>
